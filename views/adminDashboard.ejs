<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Admin Dashboard</title>
  <link rel="stylesheet" href="/style.css"/>
</head>
<body>
  <%- include('partials/header') %>
Total Users<br><strong><%= dashboardStats.totalUsers || 0 %></strong>

  <!-- Toggle Button -->
  <button class="btn btn-primary toggle-btn" id="toggleSidebar">
    <i class="fas fa-bars"></i>
  </button>

  <div class="container-fluid">
    <div class="row">

      <!-- Sidebar -->
      <nav class="col-md-2 sidebar" id="sidebar">
        <div class="position-sticky">
          <h4>Admin Dashboard</h4>
          <ul class="nav flex-column px-2">
            <li class="nav-item"><a class="nav-link" href="#overview"><i class="fas fa-tachometer-alt me-2"></i>Dashboard Overview</a></li>
            <li class="nav-item"><a class="nav-link" href="#manage-users"><i class="fas fa-users me-2"></i>Manage Users</a></li>
            <li class="nav-item"><a class="nav-link" href="#manage-hotels"><i class="fas fa-hotel me-2"></i>Manage Hotels</a></li>
            <li class="nav-item"><a class="nav-link" href="#manage-bookings"><i class="fas fa-book me-2"></i>Manage Bookings</a></li>
            <li class="nav-item"><a class="nav-link" href="#manage-reviews"><i class="fas fa-star me-2"></i>Manage Reviews</a></li>
            <li class="nav-item"><a class="nav-link" href="#user-queries"><i class="fas fa-question-circle me-2"></i>User Queries</a></li>
            <li class="nav-item"><a class="nav-link text-danger" href="/admin/logout"><i class="fas fa-sign-out-alt me-2"></i>Logout</a></li>
          </ul>
        </div>
      </nav>

      <!-- Main Content -->
      <main class="col-md-10 main-content" id="mainContent">
        
        <!-- Overview -->
        <section id="overview" class="active">
          <div class="section-heading">
            <h3>Welcome, <%= user.username %>!</h3>
            <h5>Dashboard Overview</h5>
          </div>
          <div class="row text-center">
            <div class="col-md-2 stat-card bg-primary mx-2 mb-3">
              Total Users<br><strong><%= dashboardStats.totalUsers || 0 %></strong>
            </div>
            <div class="col-md-2 stat-card bg-success mx-2 mb-3">
              Total Hotels<br><strong><%= dashboardStats.totalHotels || 0 %></strong>
            </div>
            <div class="col-md-2 stat-card bg-warning text-dark mx-2 mb-3">
              Total Bookings<br><strong><%= dashboardStats.totalBookings || 0 %></strong>
            </div>
            <div class="col-md-2 stat-card bg-info mx-2 mb-3">
              Total Reviews<br><strong><%= dashboardStats.totalReviews || 0 %></strong>
            </div>
            <div class="col-md-2 stat-card bg-danger mx-2 mb-3">
              Pending Queries<br><strong><%= dashboardStats.pendingQueries || 0 %></strong>
            </div>
          </div>
        </section>

        <!-- Manage Users -->
        <section id="manage-users">
          <div class="section-heading"><h4>Manage Users</h4></div>
          <button class="btn btn-sm btn-primary mb-3" onclick="alert('Add New User form!')">
            <i class="fas fa-plus me-2"></i>Add New User
          </button>
          <div class="table-responsive">
            <table class="table table-bordered table-hover table-sm">
              <thead>
                <tr>
                  <th>User ID</th>
                  <th>Username</th>
                  <th>Email</th>
                  <th>Contact</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                <% if (users && users.length > 0) { %>
                  <% users.forEach(user => { %>
                    <tr>
                      <td><%= user.user_id_INT %></td>
                      <td><%= user.username %></td>
                      <td><%= user.useremail %></td>
                      <td><%= user.contact %></td>
                      <td>
                        <button class="btn btn-sm btn-warning me-1" onclick="alert('Edit user ID: <%= user.user_id_INT %>')">
                          <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-sm btn-danger" onclick="confirmDeleteUser('<%= user.user_id_INT %>')">
                          <i class="fas fa-trash"></i>
                        </button>
                      </td>
                    </tr>
                  <% }) %>
                <% } else { %>
                  <tr><td colspan="5" class="text-center">No users found.</td></tr>
                <% } %>
              </tbody>
            </table>
          </div>
        </section>

        <!-- Manage Hotels -->
        <section id="manage-hotels">
          <div class="section-heading"><h4>Manage Hotels</h4></div>
          <button class="btn btn-sm btn-primary mb-3" onclick="alert('Add New Hotel!')">
            <i class="fas fa-plus me-2"></i>Add New Hotel
          </button>
          <div class="table-responsive">
            <table class="table table-bordered table-hover table-sm">
              <thead>
                <tr>
                  <th>Hotel ID</th>
                  <th>Name</th>
                  <th>City</th>
                  <th>Rating</th>
                  <th>Reviews</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                <% if (hotels && hotels.length > 0) { %>
                  <% hotels.forEach(hotel => { %>
                    <tr>
                      <td><%= hotel.hotel_id_INT %></td>
                      <td><%= hotel.hotel_name %></td>
                      <td><%= hotel.city_name %></td>
                      <td><%= hotel.rating %></td>
                      <td><%= hotel.reviewcount %></td>
                      <td>
                        <button class="btn btn-sm btn-warning me-1" onclick="alert('Edit hotel ID: <%= hotel.hotel_id_INT %>')">
                          <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-sm btn-danger" onclick="confirmDeleteHotel('<%= hotel.hotel_id_INT %>')">
                          <i class="fas fa-trash"></i>
                        </button>
                      </td>
                    </tr>
                  <% }) %>
                <% } else { %>
                  <tr><td colspan="6" class="text-center">No hotels found.</td></tr>
                <% } %>
              </tbody>
            </table>
          </div>
        </section>

        <!-- Placeholder Sections -->
        <section id="manage-bookings">
          <div class="section-heading"><h4>Manage Bookings</h4></div>
          <p class="text-muted">Bookings management will be implemented here.</p>
        </section>
        <section id="manage-reviews">
          <div class="section-heading"><h4>Manage Reviews</h4></div>
          <p class="text-muted">Reviews management will be implemented here.</p>
        </section>
        <section id="user-queries">
          <div class="section-heading"><h4>User Queries</h4></div>
          <p class="text-muted">User queries management will be implemented here.</p>
        </section>

      </main>
    </div>
  </div>

  <!-- JS Includes -->
  <script src="/js/script.js"></script>
  <%- include('partials/footer') %>
</body>
</html>
